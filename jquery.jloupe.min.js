(function(e){e.fn.jloupe=function(t){function o(t){var n,o,u,a,f=e(this).offset(),l=e(this).data("zoom"),c=0,h=0;if(t.pageX||t.pageY){c=t.pageX;h=t.pageY}else if(t.clientX||t.clientY){c=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;h=t.clientY+document.body.scrollTop+document.documentElement.scrollTop}e(r).offset({top:h+s.cursorOffsetY,left:c+s.cursorOffsetX});n=e(l).prop?e(l).prop("width"):e(l).attr("width");o=e(l).prop?e(l).prop("height"):e(l).attr("height");u=(c-f.left)/this.width*n*-1+s.width/2.5;a=(h-f.top)/this.height*o*-1+s.height/2.5;e(i).css("backgroundImage","url("+e(l).attr("src")+")").css("backgroundPosition",u+"px "+a+"px")}function u(){e(r).stop(true,true);if(s.fade){e(r).fadeOut(s.fadeOut)}else{e(r).hide()}}function a(){e(r).stop(true,true);if(s.fade){e(r).fadeIn(s.fadeIn)}else{e(r).show()}}var n="1.3.4",r,i,s={width:200,height:200,margin:6,cursorOffsetX:10,cursorOffsetY:10,radiusLT:0,radiusLB:100,radiusRT:100,radiusRB:100,borderColor:"#999",backgroundColor:"#ddd",image:false,repeat:false,fade:true,fadeIn:200,fadeOut:100};if(t){e.extend(s,t);if(t.hasOwnProperty("color")){s.borderColor=s.backgroundColor=t.color}}r=e("<div />").addClass("thejloupe").css({position:"absolute",width:s.width+"px",height:s.height+"px",backgroundColor:s.borderColor}).hide().appendTo("body");if(!s.borderColor){r.css("backgroundColor","none")}if(s.repeat){r.css("backgroundRepeat","repeat")}else{r.css("backgroundRepeat","no-repeat")}i=e("<div />").addClass("thejloupeview").css({width:s.width-s.margin*2+"px",height:s.height-s.margin*2+"px",backgroundRepeat:"no-repeat",marginLeft:s.margin+"px",marginTop:s.margin+"px"}).appendTo(r);if(s.backgroundColor){i.css("backgroundColor",s.backgroundColor)}if(s.image){r.css("backgroundImage","url("+s.image+")")}e(i).css("border-top-left-radius",s.radiusLT).css("border-bottom-left-radius",s.radiusLB).css("border-bottom-right-radius",s.radiusRB).css("border-top-right-radius",s.radiusRT).css("-moz-border-radius-topleft",s.radiusLT).css("-moz-border-radius-bottomright",s.radiusRB).css("-moz-border-radius-bottomleft",s.radiusLB).css("-moz-border-radius-topright",s.radiusRT);if(!s.image||s.repeat){e(r).css("border-top-left-radius",s.radiusLT).css("border-bottom-left-radius",s.radiusLB).css("border-bottom-right-radius",s.radiusRB).css("border-top-right-radius",s.radiusRT).css("-moz-border-radius-topleft",s.radiusLT).css("-moz-border-radius-bottomright",s.radiusRB).css("-moz-border-radius-bottomleft",s.radiusLB).css("-moz-border-radius-topright",s.radiusRT)}e(this).each(function(){var t=e(this).data("original"),n=e(this).parent("a").attr("href"),r=e(this).attr("src"),i=t||n||r,s=e("<img />").attr("src",i);e(this).data("zoom",s)}).on("mousemove",o).on("mouseleave",u).on("mouseenter",a);return this};e(function(){e(".jLoupe, .jloupe").jloupe()})})(jQuery)